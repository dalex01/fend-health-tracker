var app=app||{};!function(){"use strict";app.SearchItemModel=Backbone.Model.extend({defaults:{brand_id:0,brand_name:"",item_id:0,item_name:"",calories:0}})}();
var app=app||{};!function(){"use strict";app.ResultsItemModel=Backbone.Model.extend({defaults:{brand_id:0,brand_name:"",item_id:0,item_name:"",calories:0}})}();
var app=app||{};!function(){"use strict";var e=Backbone.Collection.extend({model:app.SearchItemModel,localStorage:new Backbone.LocalStorage("searchcalories-backbone")});app.searchItemsCollection=new e}();
var app=app||{};!function(){"use strict";var e=Backbone.Collection.extend({model:app.ResultsItemModel,localStorage:new Backbone.LocalStorage("resultscalories-backbone"),calculateTotal:function(){var e=0;return this.each(function(a){e+=a.get("calories")}),e}});app.resultsItemsCollection=new e}();
var app=app||{};!function(e){"use strict";app.SearchItemView=Backbone.View.extend({tagName:"li",template:_.template(e("#searchitem-template").html()),events:{"click .view":"addProduct"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},addProduct:function(){app.resultsItemsCollection.create({item_id:this.model.get("item_id"),item_name:this.model.get("item_name"),brand_id:this.model.get("brand_id"),brand_name:this.model.get("brand_name"),calories:this.model.get("calories")}),app.searchItemsCollection.reset()}})}(jQuery);
var app=app||{};!function(t){"use strict";app.ResultsItemView=Backbone.View.extend({tagName:"li",template:_.template(t("#productitem-template").html()),events:{"click .destroy":"clear"},initialize:function(){this.listenTo(this.model,"destroy",this.remove)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},clear:function(){this.model.destroy()}})}(jQuery);
var app=app||{};!function(e){"use strict";app.SearchView=Backbone.View.extend({el:e("#search"),events:{"keyup #new-search":"keyPressedInSearch"},initialize:function(){this.$search=e("#new-search"),this.$searchMain=this.$("#searchMain"),this.$searchResults=this.$("#searchResults"),this.$list=e("#search-list"),this.$loading=e("#loading"),this.listenTo(app.searchItemsCollection,"add",this.addOne),this.listenTo(app.searchItemsCollection,"reset",this.addAll),this.listenTo(app.searchItemsCollection,"all",this.render)},render:function(){app.searchItemsCollection.length?this.$searchResults.show():this.$searchResults.hide()},addOne:function(e){var s=new app.SearchItemView({model:e});this.$list.append(s.render().el)},addAll:function(){this.$list.html(""),app.searchItemsCollection.each(this.addOne,this)},searchProducts:function(s){var a=this;a.$searchResults.show(),a.$loading.show();var i="https://api.nutritionix.com/v1_1/search/"+s+"?results=0%3A20&cal_min=0&cal_max=20&fields=item_name%2Cbrand_name%2Citem_id%2Cbrand_id%2Cnf_calories&appId=9d3343d7&appKey=4283cbc03da532a49ad58e0048e9418f";e.ajax({url:i,dataType:"json",success:function(e){var s=e.hits;if(s.length){for(var i=0;i<s.length;i++)app.searchItemsCollection.create({brand_id:s[i].fields.brand_id,brand_name:s[i].fields.brand_name,item_id:s[i].fields.item_id,item_name:s[i].fields.item_name,calories:s[i].fields.nf_calories});a.$loading.hide()}else a.$loading.hide(),a.$searchResults.show(),a.$list.append("<li><div class='view'><label id=\"product\">No results for this query. Try again, please.</label></div></li>")},error:function(e,a,t){alert(e.status+" failed to get Nutritionix resources for search query "+s+"\nUrl requested: \n"+i)}})},keyPressedInSearch:function(e){var s=this.$search.val().trim();e.keyCode===ENTER_KEY&&s?(this.searchProducts(s),this.$search.val("")):e.keyCode===ESC_KEY&&s&&this.$search.val("")}})}(jQuery);
var app=app||{};!function(t){"use strict";app.ResultsView=Backbone.View.extend({el:t("#list"),initialize:function(){this.$list=t("#products-list"),this.$main=t("#main"),this.$total=t("#total"),this.$totalCount=t(".totalCount"),this.listenTo(app.resultsItemsCollection,"add",this.addOne),this.listenTo(app.resultsItemsCollection,"reset",this.addAll),this.listenTo(app.resultsItemsCollection,"all",this.render),this.listenTo(app.resultsItemsCollection,"remove",this.render),app.resultsItemsCollection.fetch({reset:!0})},render:function(){app.resultsItemsCollection.length?(this.$totalCount.html(app.resultsItemsCollection.calculateTotal()),this.$main.show(),this.$total.show()):(this.$main.hide(),this.$total.hide())},addOne:function(t){var e=new app.ResultsItemView({model:t});this.$list.append(e.render().el)},addAll:function(){this.$list.html(""),app.resultsItemsCollection.each(this.addOne,this)}})}(jQuery);
var app=app||{};!function(t){"use strict";var e=Backbone.Router.extend({routes:{}});new e;Backbone.history.start()}();
var app=app||{},ENTER_KEY=13,ESC_KEY=27;$(function(){"use strict";new app.SearchView,new app.ResultsView});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlYXJjaEl0ZW0uanMiLCJyZXN1bHRzSXRlbS5qcyIsInNlYXJjaEl0ZW1zLmpzIiwicmVzdWx0c0l0ZW1zLmpzIiwic2VhcmNoSXRlbVZpZXcuanMiLCJyZXN1bHRzSXRlbVZpZXcuanMiLCJzZWFyY2hWaWV3LmpzIiwicmVzdWx0c1ZpZXcuanMiLCJyb3V0ZXIuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiYXBwIiwiU2VhcmNoSXRlbU1vZGVsIiwiQmFja2JvbmUiLCJNb2RlbCIsImV4dGVuZCIsImRlZmF1bHRzIiwiYnJhbmRfaWQiLCJicmFuZF9uYW1lIiwiaXRlbV9pZCIsIml0ZW1fbmFtZSIsImNhbG9yaWVzIiwiUmVzdWx0c0l0ZW1Nb2RlbCIsIlNlYXJjaEl0ZW1zQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJtb2RlbCIsImxvY2FsU3RvcmFnZSIsIkxvY2FsU3RvcmFnZSIsInNlYXJjaEl0ZW1zQ29sbGVjdGlvbiIsIlJlc3VsdHNJdGVtc0NvbGxlY3Rpb24iLCJjYWxjdWxhdGVUb3RhbCIsInN1bSIsInRoaXMiLCJlYWNoIiwiZ2V0IiwicmVzdWx0c0l0ZW1zQ29sbGVjdGlvbiIsIiQiLCJTZWFyY2hJdGVtVmlldyIsIlZpZXciLCJ0YWdOYW1lIiwidGVtcGxhdGUiLCJfIiwiaHRtbCIsImV2ZW50cyIsImNsaWNrIC52aWV3IiwicmVuZGVyIiwiJGVsIiwidG9KU09OIiwiYWRkUHJvZHVjdCIsImNyZWF0ZSIsInJlc2V0IiwialF1ZXJ5IiwiUmVzdWx0c0l0ZW1WaWV3IiwiY2xpY2sgLmRlc3Ryb3kiLCJpbml0aWFsaXplIiwibGlzdGVuVG8iLCJyZW1vdmUiLCJjbGVhciIsImRlc3Ryb3kiLCJTZWFyY2hWaWV3IiwiZWwiLCJrZXl1cCAjbmV3LXNlYXJjaCIsIiRzZWFyY2giLCIkc2VhcmNoTWFpbiIsIiRzZWFyY2hSZXN1bHRzIiwiJGxpc3QiLCIkbG9hZGluZyIsImFkZE9uZSIsImFkZEFsbCIsImxlbmd0aCIsInNob3ciLCJoaWRlIiwiaXRlbSIsInZpZXciLCJhcHBlbmQiLCJzZWFyY2hQcm9kdWN0cyIsImUiLCJzZWxmIiwidXJsIiwiYWpheCIsImRhdGFUeXBlIiwic3VjY2VzcyIsInJlc3BvbnNlIiwicHJBcnJheSIsImhpdHMiLCJmaWVsZHMiLCJuZl9jYWxvcmllcyIsImVycm9yIiwieGhyIiwiYWpheE9wdGlvbnMiLCJ0aHJvd25FcnJvciIsImFsZXJ0Iiwic3RhdHVzIiwia2V5UHJlc3NlZEluU2VhcmNoIiwic2VhcmNoUXVlcnkiLCJ2YWwiLCJ0cmltIiwia2V5Q29kZSIsIkVOVEVSX0tFWSIsIkVTQ19LRVkiLCJSZXN1bHRzVmlldyIsIiRtYWluIiwiJHRvdGFsIiwiJHRvdGFsQ291bnQiLCJmZXRjaCIsIkFwcFJvdXRlciIsIlJvdXRlciIsInJvdXRlcyIsImhpc3RvcnkiLCJzdGFydCJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsS0FBTUEsU0FFVixXQUNDLFlBTUFBLEtBQUlDLGdCQUFrQkMsU0FBU0MsTUFBTUMsUUFFcENDLFVBQ0NDLFNBQVUsRUFDVkMsV0FBWSxHQUNaQyxRQUFTLEVBQ1RDLFVBQVcsR0FDWEMsU0FBVTtBQ2hCYixHQUFJVixLQUFNQSxTQUVWLFdBQ0MsWUFNQUEsS0FBSVcsaUJBQW1CVCxTQUFTQyxNQUFNQyxRQUVyQ0MsVUFDQ0MsU0FBVSxFQUNWQyxXQUFZLEdBQ1pDLFFBQVMsRUFDVEMsVUFBVyxHQUNYQyxTQUFVO0FDaEJiLEdBQUlWLEtBQU1BLFNBRVYsV0FDQyxZQU1BLElBQUlZLEdBQXdCVixTQUFTVyxXQUFXVCxRQUcvQ1UsTUFBT2QsSUFBSUMsZ0JBR1hjLGFBQWMsR0FBSWIsVUFBU2MsYUFBYSw0QkFLekNoQixLQUFJaUIsc0JBQXdCLEdBQUlMO0FDcEJqQyxHQUFJWixLQUFNQSxTQUVWLFdBQ0MsWUFNQSxJQUFJa0IsR0FBeUJoQixTQUFTVyxXQUFXVCxRQUdoRFUsTUFBT2QsSUFBSVcsaUJBR1hJLGFBQWMsR0FBSWIsVUFBU2MsYUFBYSw0QkFHeENHLGVBQWdCLFdBQ2YsR0FBSUMs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QUFLYSxRQUV6RGxDLElBQUl3Qix1QkFBdUJxRSxPQUFPdEQsT0FBTyxLQUkxQ0wsT0FBUSxXQUVIbEMsSUFBSXdCLHVCQUF1QmtDLFFBQzlCckMsS0FBS3VFLFlBQVk3RCxLQUFLL0IsSUFBSXdCLHVCQUF1Qkwsa0JBQ2pERSxLQUFLcUUsTUFBTS9CLE9BQ1h0QyxLQUFLc0UsT0FBT2hDLFNBR1p0QyxLQUFLcUUsTUFBTTlCLE9BQ1h2QyxLQUFLc0UsT0FBTy9CLFNBTWRKLE9BQVEsU0FBVUssR0FDakIsR0FBSUMsR0FBTyxHQUFJOUQsS0FBSXlDLGlCQUFrQjNCLE1BQU8rQyxHQUM1Q3hDLE1BQUtpQyxNQUFNUyxPQUFPRCxFQUFLNUIsU0FBU2UsS0FJakNRLE9BQVEsV0FDUHBDLEtBQUtpQyxNQUFNdkIsS0FBSyxJQUNoQi9CLElBQUl3Qix1QkFBdUJGLEtBQUtELEtBQUttQyxPQUFRbkMsVUFHN0NtQjtBQ3ZESCxHQUFJeEMsS0FBTUEsU0FFVixTQUFXeUIsR0FDUCxZQUVBLElBQUlxRSxHQUFZNUYsU0FBUzZGLE9BQU8zRixRQUM1QjRGLFdBTVMsSUFBSUYsRUFDakI1RixVQUFTK0YsUUFBUUM7QUNkckIsR0FBSWxHLEtBQU1BLFFBQ051RixVQUFZLEdBQ1pDLFFBQVUsRUFFZC9ELEdBQUUsV0FDRCxZQUdBLElBQUl6QixLQUFJZ0QsV0FDUixHQUFJaEQsS0FBSXlGIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsIEJhY2tib25lICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0Ly8gU2VhcmNoIE1vZGVsXHJcblx0Ly8gLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8vIE91ciBiYXNpYyBTZWFyY2ggbW9kZWwgaGFzICdicmFuZF9pZCcsICdicmFuZF9uYW1lJywgJ2l0ZW1faWQnLCAnaXRlbV9uYW1lJyBhbmQgJ2NhbG9yaWVzJyBhdHRyaWJ1dGVzLlxyXG5cdGFwcC5TZWFyY2hJdGVtTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xyXG5cdFx0Ly8gRGVmYXVsdCBhdHRyaWJ1dGVzIGZvciB0aGUgc2VhcmNoXHJcblx0XHRkZWZhdWx0czoge1xyXG5cdFx0XHRicmFuZF9pZDogMCxcclxuXHRcdFx0YnJhbmRfbmFtZTogJycsXHJcblx0XHRcdGl0ZW1faWQ6IDAsXHJcblx0XHRcdGl0ZW1fbmFtZTogJycsXHJcblx0XHRcdGNhbG9yaWVzOiAwXHJcblx0XHR9LFxyXG5cdH0pO1xyXG59KSgpOyIsIi8qZ2xvYmFsIEJhY2tib25lICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0Ly8gUHJvZHVjdCBNb2RlbFxyXG5cdC8vIC0tLS0tLS0tLS0tLS1cclxuXHJcblx0Ly8gT3VyIGJhc2ljIFNlYXJjaCBtb2RlbCBoYXMgJ2JyYW5kX2lkJywgJ2JyYW5kX25hbWUnLCAnaXRlbV9pZCcsICdpdGVtX25hbWUnIGFuZCAnY2Fsb3JpZXMnIGF0dHJpYnV0ZXMuXHJcblx0YXBwLlJlc3VsdHNJdGVtTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xyXG5cdFx0Ly8gRGVmYXVsdCBhdHRyaWJ1dGVzIGZvciB0aGUgY2hvc2VuIHByb2R1Y3RcclxuXHRcdGRlZmF1bHRzOiB7XHJcblx0XHRcdGJyYW5kX2lkOiAwLFxyXG5cdFx0XHRicmFuZF9uYW1lOiAnJyxcclxuXHRcdFx0aXRlbV9pZDogMCxcclxuXHRcdFx0aXRlbV9uYW1lOiAnJyxcclxuXHRcdFx0Y2Fsb3JpZXM6IDBcclxuXHRcdH1cclxuXHR9KTtcclxufSkoKTsiLCIvKmdsb2JhbCBCYWNrYm9uZSAqL1xyXG52YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8vIFNlYXJjaCBDb2xsZWN0aW9uXHJcblx0Ly8gLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8vIFRoZSBjb2xsZWN0aW9uIG9mIHNlYXJjaCByZXN1bHRzXHJcblx0dmFyIFNlYXJjaEl0ZW1zQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcclxuXHJcblx0XHQvLyBSZWZlcmVuY2UgdG8gdGhpcyBjb2xsZWN0aW9uJ3MgbW9kZWwuXHJcblx0XHRtb2RlbDogYXBwLlNlYXJjaEl0ZW1Nb2RlbCxcclxuXHJcblx0XHQvLyBTYXZlIGFsbCBvZiB0aGUgZm91bmQgaXRlbXMgdW5kZXIgdGhlICdzZWFyY2hjYWxvcmllcy1iYWNrYm9uZScgbmFtZXNwYWNlLlxyXG5cdFx0bG9jYWxTdG9yYWdlOiBuZXcgQmFja2JvbmUuTG9jYWxTdG9yYWdlKCdzZWFyY2hjYWxvcmllcy1iYWNrYm9uZScpXHJcblxyXG5cdH0pO1xyXG5cclxuXHQvLyBDcmVhdGUgb3VyIGdsb2JhbCBjb2xsZWN0aW9uIG9mIHNlYXJjaCByZXN1bHRzLlxyXG5cdGFwcC5zZWFyY2hJdGVtc0NvbGxlY3Rpb24gPSBuZXcgU2VhcmNoSXRlbXNDb2xsZWN0aW9uKCk7XHJcbn0pKCk7XHJcbiIsIi8qZ2xvYmFsIEJhY2tib25lICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0Ly8gQ2hvc2VuIHByb2R1Y3RzIENvbGxlY3Rpb25cclxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvLyBUaGUgY29sbGVjdGlvbiBvZiBjaG9zZW4gcHJvZHVjc3RcclxuXHR2YXIgUmVzdWx0c0l0ZW1zQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcclxuXHJcblx0XHQvLyBSZWZlcmVuY2UgdG8gdGhpcyBjb2xsZWN0aW9uJ3MgbW9kZWwuXHJcblx0XHRtb2RlbDogYXBwLlJlc3VsdHNJdGVtTW9kZWwsXHJcblxyXG5cdFx0Ly8gU2F2ZSBhbGwgb2YgdGhlIGNob3NlbiBpdGVtcyB1bmRlciB0aGUgJ3Jlc3VsdHNjYWxvcmllcy1iYWNrYm9uZScgbmFtZXNwYWNlLlxyXG5cdFx0bG9jYWxTdG9yYWdlOiBuZXcgQmFja2JvbmUuTG9jYWxTdG9yYWdlKCdyZXN1bHRzY2Fsb3JpZXMtYmFja2JvbmUnKSxcclxuXHJcblx0XHQvLyBDYWxjdWF0ZSB0b3RhbCBudW1iZXIgb2YgY2Fsb3JpZXMgZm9yIGNob3NlbiBwcm9kdWN0cy5cclxuXHRcdGNhbGN1bGF0ZVRvdGFsOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBzdW0gPSAwO1xyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24obW9kZWwpIHtcclxuXHRcdFx0XHRzdW0gKz0gbW9kZWwuZ2V0KCdjYWxvcmllcycpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHN1bTtcclxuXHRcdH0sXHJcblx0fSk7XHJcblxyXG5cdC8vIENyZWF0ZSBvdXIgZ2xvYmFsIGNvbGxlY3Rpb24gb2YgY2hvc2VuIHByb2R1Y3RzLlxyXG5cdGFwcC5yZXN1bHRzSXRlbXNDb2xsZWN0aW9uID0gbmV3IFJlc3VsdHNJdGVtc0NvbGxlY3Rpb24oKTtcclxufSkoKTtcclxuIiwiLypnbG9iYWwgQmFja2JvbmUsIGpRdWVyeSwgXywgRU5URVJfS0VZLCBFU0NfS0VZICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8vIFNlYXJjaCBJdGVtIFZpZXdcclxuXHQvLyAtLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvLyBUaGUgRE9NIGVsZW1lbnQgZm9yIGEgc2VhcmNoIGl0ZW0uLi5cclxuXHRhcHAuU2VhcmNoSXRlbVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblx0XHQvLy4uLiBpcyBhIGxpc3QgdGFnLlxyXG5cdFx0dGFnTmFtZTogICdsaScsXHJcblxyXG5cdFx0Ly8gQ2FjaGUgdGhlIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciBhIHNpbmdsZSBpdGVtLlxyXG5cdFx0dGVtcGxhdGU6IF8udGVtcGxhdGUoJCgnI3NlYXJjaGl0ZW0tdGVtcGxhdGUnKS5odG1sKCkpLFxyXG5cclxuXHRcdC8vIFRoZSBET00gZXZlbnRzIHNwZWNpZmljIHRvIGFuIGl0ZW0uXHJcblx0XHRldmVudHM6IHtcclxuXHRcdFx0J2NsaWNrIC52aWV3JzogJ2FkZFByb2R1Y3QnIC8vIGlmIHNlYXJjaCBpdGVtIGlzIGNsaWNrZWQgaXQgc2hvdWxkIGJlIGFkZGVkIHRvIHByb2R1Y3QgbGlzdFxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBSZS1yZW5kZXIgdGhlIHRoZSBzZWFyY2ggaXRlbS5cclxuXHRcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gQWRkIGNsaWNrZWQgc2VhcmNoIGl0ZW0gdG8gcHJvZHVjdCBsaXN0IChjb2xsZWN0aW9uKSBhbmQgY2xlYXIgc2VhcmNoIHJlc3VsdHNcclxuXHRcdGFkZFByb2R1Y3Q6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0YXBwLnJlc3VsdHNJdGVtc0NvbGxlY3Rpb24uY3JlYXRlKHtcclxuXHRcdFx0XHRpdGVtX2lkOiB0aGlzLm1vZGVsLmdldCgnaXRlbV9pZCcpLFxyXG5cdFx0XHRcdGl0ZW1fbmFtZTogdGhpcy5tb2RlbC5nZXQoJ2l0ZW1fbmFtZScpLFxyXG5cdFx0XHRcdGJyYW5kX2lkOiB0aGlzLm1vZGVsLmdldCgnYnJhbmRfaWQnKSxcclxuXHRcdFx0XHRicmFuZF9uYW1lOiB0aGlzLm1vZGVsLmdldCgnYnJhbmRfbmFtZScpLFxyXG5cdFx0XHRcdGNhbG9yaWVzOiB0aGlzLm1vZGVsLmdldCgnY2Fsb3JpZXMnKVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0YXBwLnNlYXJjaEl0ZW1zQ29sbGVjdGlvbi5yZXNldCgpO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxufSkoalF1ZXJ5KTtcclxuIiwiLypnbG9iYWwgQmFja2JvbmUsIGpRdWVyeSwgXywgRU5URVJfS0VZLCBFU0NfS0VZICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8vIFByb2R1Y3QgSXRlbSBWaWV3XHJcblx0Ly8gLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0Ly8gVGhlIERPTSBlbGVtZW50IGZvciBhIHByb2R1Y3QgaXRlbS4uLlxyXG5cdGFwcC5SZXN1bHRzSXRlbVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblx0XHQvLy4uLiBpcyBhIGxpc3QgdGFnLlxyXG5cdFx0dGFnTmFtZTogICdsaScsXHJcblxyXG5cdFx0Ly8gQ2FjaGUgdGhlIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciBhIHNpbmdsZSBwcm9kdWN0IGl0ZW0uXHJcblx0XHR0ZW1wbGF0ZTogXy50ZW1wbGF0ZSgkKCcjcHJvZHVjdGl0ZW0tdGVtcGxhdGUnKS5odG1sKCkpLFxyXG5cclxuXHRcdC8vIFRoZSBET00gZXZlbnRzIHNwZWNpZmljIHRvIGFuIGl0ZW0uXHJcblx0XHRldmVudHM6IHtcclxuXHRcdFx0J2NsaWNrIC5kZXN0cm95JzogJ2NsZWFyJywgLy8gaWYgcmVtb3ZlIGJ1dHRvbiBpcyBjbGlja2VkIC0gcmVtb3ZlIGl0ZW0gZnJvbSB0aGUgbGlzdCBhbmQgY29sbGVjdGlvblxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUaGUgUmVzdWx0c0l0ZW1WaWV3IGxpc3RlbnMgZm9yIGNoYW5nZXMgdG8gaXRzIG1vZGVsIChkZXN0cm95IGV2ZW50KS5cclxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCAnZGVzdHJveScsIHRoaXMucmVtb3ZlKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gUmUtcmVuZGVyIHRoZSB0aGUgcHJvZHVjdCBpdGVtLlxyXG5cdFx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLnRvSlNPTigpKSk7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBSZW1vdmUgdGhlIGl0ZW0sIGRlc3Ryb3kgdGhlIG1vZGVsIGZyb20gKmxvY2FsU3RvcmFnZSogYW5kIGRlbGV0ZSBpdHMgdmlldy5cclxuXHRcdGNsZWFyOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMubW9kZWwuZGVzdHJveSgpO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxufSkoalF1ZXJ5KTtcclxuIiwiLypnbG9iYWwgQmFja2JvbmUsIGpRdWVyeSwgXywgRU5URVJfS0VZICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8vIFRoZSBTZWFyY2ggVmlld1xyXG5cdC8vIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvLyBPdXIgb3ZlcmFsbCBTZWFyY2hWaWV3IGlzIHRoZSB0b3AtbGV2ZWwgcGllY2Ugb2Ygc2VhcmNoIFVJLlxyXG5cdGFwcC5TZWFyY2hWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xyXG5cclxuXHQgICAgZWw6ICQoXCIjc2VhcmNoXCIpLCAvLyBET00gZWxlbWVudFxyXG5cclxuXHQgICAgLy8gVGhlIERPTSBldmVudCBzcGVjaWZpYyBmb3IgdGhlIHNlYXJjaCB2aWV3XHJcblx0ICAgIGV2ZW50czoge1xyXG5cdCAgICAgICAgJ2tleXVwICNuZXctc2VhcmNoJzogJ2tleVByZXNzZWRJblNlYXJjaCcgLy8gc2VhcmNoIGVudGVyZWQgcXVlcnkgaWYgRU5URVIgaXMgcHJlc3NlZCBpbiBzZWFyY2ggaW5wdXRcclxuXHQgICAgfSxcclxuXHJcblx0ICAgIC8vIEF0IGluaXRpYWxpemF0aW9uIHdlIGJpbmQgdG8gdGhlIHJlbGV2YW50IGV2ZW50cyBvbiB0aGUgYHNlYXJjaEl0ZW1zQ29sbGVjdGlvbmBcclxuXHRcdC8vIGNvbGxlY3Rpb24sIHdoZW4gaXRlbXMgYXJlIGFkZGVkIG9yIGNoYW5nZWQuXHJcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuJHNlYXJjaCA9ICQoJyNuZXctc2VhcmNoJyk7XHJcblx0XHRcdHRoaXMuJHNlYXJjaE1haW4gPSB0aGlzLiQoJyNzZWFyY2hNYWluJyk7XHJcblx0XHRcdHRoaXMuJHNlYXJjaFJlc3VsdHMgPSB0aGlzLiQoJyNzZWFyY2hSZXN1bHRzJyk7XHJcblx0XHRcdHRoaXMuJGxpc3QgPSAkKCcjc2VhcmNoLWxpc3QnKTtcclxuXHRcdFx0dGhpcy4kbG9hZGluZyA9ICQoJyNsb2FkaW5nJyk7XHJcblxyXG5cdFx0XHR0aGlzLmxpc3RlblRvKGFwcC5zZWFyY2hJdGVtc0NvbGxlY3Rpb24sICdhZGQnLCB0aGlzLmFkZE9uZSk7XHJcblx0XHRcdHRoaXMubGlzdGVuVG8oYXBwLnNlYXJjaEl0ZW1zQ29sbGVjdGlvbiwgJ3Jlc2V0JywgdGhpcy5hZGRBbGwpO1xyXG5cdFx0XHR0aGlzLmxpc3RlblRvKGFwcC5zZWFyY2hJdGVtc0NvbGxlY3Rpb24sICdhbGwnLCB0aGlzLnJlbmRlcik7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFJlLXJlbmRlcmluZyB0aGUgU2VhcmNoVmlldyBqdXN0IG1lYW5zIHNob3cvaGlkZSByZXN1bHRzIG9mIHRoZSBzZWFyY2hcclxuXHRcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpZiAoYXBwLnNlYXJjaEl0ZW1zQ29sbGVjdGlvbi5sZW5ndGgpIHtcclxuXHRcdFx0XHR0aGlzLiRzZWFyY2hSZXN1bHRzLnNob3coKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLiRzZWFyY2hSZXN1bHRzLmhpZGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBBZGQgYSBzaW5nbGUgc2VhcmNoIGl0ZW0gdG8gdGhlIGxpc3QgYnkgY3JlYXRpbmcgYSB2aWV3IGZvciBpdCwgYW5kXHJcblx0XHQvLyBhcHBlbmRpbmcgaXRzIGVsZW1lbnQgdG8gdGhlIGA8dWw+YC5cclxuXHRcdGFkZE9uZTogZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHRcdFx0dmFyIHZpZXcgPSBuZXcgYXBwLlNlYXJjaEl0ZW1WaWV3KHsgbW9kZWw6IGl0ZW0gfSk7XHJcblx0XHRcdHRoaXMuJGxpc3QuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBBZGQgYWxsIGl0ZW1zIGluIHRoZSAnc2VhcmNoSXRlbXNDb2xsZWN0aW9uJyBjb2xsZWN0aW9uIGF0IG9uY2UuXHJcblx0XHRhZGRBbGw6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGhpcy4kbGlzdC5odG1sKCcnKTtcclxuXHRcdFx0YXBwLnNlYXJjaEl0ZW1zQ29sbGVjdGlvbi5lYWNoKHRoaXMuYWRkT25lLCB0aGlzKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gUXVlcnkgc2VhcmNoIHJlc3VsdHMgdmlhIEFQSSBhbmQgY3JlYXRlIG5ldyBzZWFyY2ggbW9kZWxzIGFjY29yZGluZyB0byByZWNlaXZlZCByZXNwb25zZS5cclxuXHRcdHNlYXJjaFByb2R1Y3RzOiBmdW5jdGlvbiAoZSkge1xyXG5cclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvLyBTaG93ICdMb2FkaW5nLi4uJyBub3RpZmljYXRpb25cclxuXHRcdCAgICBzZWxmLiRzZWFyY2hSZXN1bHRzLnNob3coKTtcclxuXHRcdCAgICBzZWxmLiRsb2FkaW5nLnNob3coKTtcclxuXHJcblx0XHRcdHZhciB1cmwgPSBcImh0dHBzOi8vYXBpLm51dHJpdGlvbml4LmNvbS92MV8xL3NlYXJjaC9cIiArIGUgKyBcIj9yZXN1bHRzPTAlM0EyMCZjYWxfbWluPTAmY2FsX21heD0yMCZmaWVsZHM9aXRlbV9uYW1lJTJDYnJhbmRfbmFtZSUyQ2l0ZW1faWQlMkNicmFuZF9pZCUyQ25mX2NhbG9yaWVzJmFwcElkPTlkMzM0M2Q3JmFwcEtleT00MjgzY2JjMDNkYTUzMmE0OWFkNThlMDA0OGU5NDE4ZlwiO1xyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0ICAgICAgICB1cmw6IHVybCxcclxuXHRcdCAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuXHRcdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdCAgICAgICAgXHR2YXIgcHJBcnJheSA9IHJlc3BvbnNlLmhpdHM7XHJcblx0XHQgICAgICAgIFx0Ly8gSWYgc2VhcmNoIHJldHVybiByZXN1bHRzXHJcblx0XHQgICAgICAgIFx0aWYgKHByQXJyYXkubGVuZ3RoKSB7XHJcblx0XHRcdCAgICAgICAgXHRmb3IgKHZhciBpdGVtID0gMDsgaXRlbSA8IHByQXJyYXkubGVuZ3RoOyBpdGVtKyspIHtcclxuXHRcdFx0XHRcdFx0XHRhcHAuc2VhcmNoSXRlbXNDb2xsZWN0aW9uLmNyZWF0ZSh7XHJcblx0XHRcdFx0XHRcdFx0XHRicmFuZF9pZDogcHJBcnJheVtpdGVtXS5maWVsZHMuYnJhbmRfaWQsXHJcblx0XHRcdCAgICAgICAgXHRcdFx0YnJhbmRfbmFtZTogcHJBcnJheVtpdGVtXS5maWVsZHMuYnJhbmRfbmFtZSxcclxuXHRcdFx0ICAgICAgICBcdFx0XHRpdGVtX2lkOiBwckFycmF5W2l0ZW1dLmZpZWxkcy5pdGVtX2lkLFxyXG5cdFx0XHQgICAgICAgIFx0XHRcdGl0ZW1fbmFtZTogcHJBcnJheVtpdGVtXS5maWVsZHMuaXRlbV9uYW1lLFxyXG5cdFx0XHQgICAgICAgIFx0XHRcdGNhbG9yaWVzOiBwckFycmF5W2l0ZW1dLmZpZWxkcy5uZl9jYWxvcmllc1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIEhpZGUgJ0xvYWRpbmcuLi4nIG5vdGlmaWNhdGlvbiB3aGVuIGV2ZXJ5dGhpbmcgaXMgbG9hZGVkXHJcblx0XHRcdFx0XHRcdHNlbGYuJGxvYWRpbmcuaGlkZSgpO1xyXG5cdFx0XHRcdFx0Ly8gRWxzZSBpZiBzZWFyY2ggZG9uJ3QgZmluZCBhbnl0aGluZ1xyXG5cdFx0ICAgICAgICBcdH0gZWxzZSB7XHJcblx0XHQgICAgICAgIFx0XHQvLyBIaWRlICdMb2FkaW5nLi4uJyBub3RpZmljYXRpb24gd2hlbiBldmVyeXRoaW5nIGlzIGxvYWRlZFxyXG5cdFx0ICAgICAgICBcdFx0c2VsZi4kbG9hZGluZy5oaWRlKCk7XHJcblx0XHQgICAgICAgIFx0XHQvLyBTaG93IG5vdGlmaWNhdGlvbiB0aGF0IG5vdGhpbmcgaXMgZm91bmRcclxuXHRcdCAgICAgICAgXHRcdHNlbGYuJHNlYXJjaFJlc3VsdHMuc2hvdygpO1xyXG5cdFx0ICAgICAgICBcdFx0c2VsZi4kbGlzdC5hcHBlbmQoJzxsaT48ZGl2IGNsYXNzPVxcJ3ZpZXdcXCc+PGxhYmVsIGlkPVwicHJvZHVjdFwiPk5vIHJlc3VsdHMgZm9yIHRoaXMgcXVlcnkuIFRyeSBhZ2FpbiwgcGxlYXNlLjwvbGFiZWw+PC9kaXY+PC9saT4nKTtcclxuXHRcdCAgICAgICAgXHR9XHJcblx0XHQgICAgICAgIH0sXHJcblx0XHQgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHtcclxuXHRcdCAgICAgICAgXHQvLyBhbGVydCBpZiBhamF4IHJlcXVlc3Qgd2FzIG5vdCBleGVjdXRlZCBjb3JyZWN0bHlcclxuXHRcdFx0ICAgICAgICBhbGVydCh4aHIuc3RhdHVzICsgJyBmYWlsZWQgdG8gZ2V0IE51dHJpdGlvbml4IHJlc291cmNlcyBmb3Igc2VhcmNoIHF1ZXJ5ICcgKyBlICsgJ1xcblVybCByZXF1ZXN0ZWQ6IFxcbicgKyB1cmwpO1xyXG5cdFx0XHQgICAgfVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gSGFuZGxlIGtleXVwIGV2ZW50IGZvciBFTlRFUiBvciBFU0Mga2V5c1xyXG5cdCAgICBrZXlQcmVzc2VkSW5TZWFyY2g6IGZ1bmN0aW9uIChlKSB7XHJcblx0ICAgIFx0dmFyIHNlYXJjaFF1ZXJ5ID0gdGhpcy4kc2VhcmNoLnZhbCgpLnRyaW0oKTtcclxuXHQgICAgXHQvLyBSZXF1ZXN0IHNlYXJjaCByZXN1bHRzIHZpYSBBUEkgaWYgRU5FVEVSIGlzIHByZXNzZWQgaW4gc2VhcmNoIGlucHV0IGFuZCBzZWFyY2ggcXVlcnkgaXMgbm90IGVtcHR5XHJcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBFTlRFUl9LRVkgJiYgc2VhcmNoUXVlcnkpIHtcclxuXHQgICAgICAgIFx0dGhpcy5zZWFyY2hQcm9kdWN0cyhzZWFyY2hRdWVyeSk7XHJcblx0ICAgICAgICBcdHRoaXMuJHNlYXJjaC52YWwoJycpO1xyXG5cdCAgICAgICBcdC8vIEVsc2UgY2xlYXIgc2VhcmNoIGlucHV0IGlmIEVTQyBrZXkgaXMgcHJlc3NlZCBhbmQgc2VhcmNoIHF1ZXJ5IGlzIG5vdCBlbXB0eVxyXG5cdFx0XHR9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gRVNDX0tFWSAmJiBzZWFyY2hRdWVyeSkge1xyXG5cdFx0XHRcdHRoaXMuJHNlYXJjaC52YWwoJycpO1xyXG5cdFx0XHR9XHJcblx0ICAgIH1cclxuXHJcblx0fSk7XHJcbn0pKGpRdWVyeSk7IiwiLypnbG9iYWwgQmFja2JvbmUsIGpRdWVyeSwgXywgRU5URVJfS0VZICovXHJcbnZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8vIFRoZSBQcm9kdWN0cyBMaXN0IFZpZXdcclxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8vIE91ciBvdmVyYWxsIFJlc3VsdHNWaWV3IGlzIHRoZSB0b3AtbGV2ZWwgcGllY2Ugb2YgcHJvZHVjdHMgbGlzdCBVSS5cclxuXHRhcHAuUmVzdWx0c1ZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblxyXG5cdCAgICBlbDogJChcIiNsaXN0XCIpLCAvLyBET00gZWxlbWVudFxyXG5cclxuXHRcdC8vIEF0IGluaXRpYWxpemF0aW9uIHdlIGJpbmQgdG8gdGhlIHJlbGV2YW50IGV2ZW50cyBvbiB0aGUgYHJlc3VsdHNJdGVtc0NvbGxlY3Rpb25gXHJcblx0XHQvLyBjb2xsZWN0aW9uLCB3aGVuIGl0ZW1zIGFyZSBhZGRlZCBvciBjaGFuZ2VkLiBLaWNrIHRoaW5ncyBvZmYgYnlcclxuXHRcdC8vIGxvYWRpbmcgYW55IHByZWV4aXN0aW5nIHByb2R1Y3RzIHRoYXQgbWlnaHQgYmUgc2F2ZWQgaW4gKmxvY2FsU3RvcmFnZSouXHJcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuJGxpc3QgPSAkKCcjcHJvZHVjdHMtbGlzdCcpO1xyXG5cdFx0XHR0aGlzLiRtYWluID0gJCgnI21haW4nKTtcclxuXHRcdFx0dGhpcy4kdG90YWwgPSAkKCcjdG90YWwnKTtcclxuXHRcdFx0dGhpcy4kdG90YWxDb3VudCA9ICQoJy50b3RhbENvdW50Jyk7XHJcblxyXG5cdFx0XHR0aGlzLmxpc3RlblRvKGFwcC5yZXN1bHRzSXRlbXNDb2xsZWN0aW9uLCAnYWRkJywgdGhpcy5hZGRPbmUpO1xyXG5cdFx0XHR0aGlzLmxpc3RlblRvKGFwcC5yZXN1bHRzSXRlbXNDb2xsZWN0aW9uLCAncmVzZXQnLCB0aGlzLmFkZEFsbCk7XHJcblx0XHRcdHRoaXMubGlzdGVuVG8oYXBwLnJlc3VsdHNJdGVtc0NvbGxlY3Rpb24sICdhbGwnLCB0aGlzLnJlbmRlcik7XHJcblx0XHRcdHRoaXMubGlzdGVuVG8oYXBwLnJlc3VsdHNJdGVtc0NvbGxlY3Rpb24sICdyZW1vdmUnLCB0aGlzLnJlbmRlcik7XHJcblxyXG5cdFx0XHRhcHAucmVzdWx0c0l0ZW1zQ29sbGVjdGlvbi5mZXRjaCh7cmVzZXQ6IHRydWV9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gUmUtcmVuZGVyaW5nIHByb2R1Y3QgbGlzdCBqdXN0IG1lYW5zIHJlZnJlc2hpbmcgdGhlIHN0YXRpc3RpY3Mgb2YgdG90YWwgY2Fsb3JpZXNcclxuXHRcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQvLyBDYWxjdWxhdGUgdG90YWwgY2Fsb3JpZXMgaWYgcHJvZHVjdCBsaXN0IGlzIG5vdCBlbXB0eVxyXG5cdFx0XHRpZiAoYXBwLnJlc3VsdHNJdGVtc0NvbGxlY3Rpb24ubGVuZ3RoKSB7XHJcblx0XHRcdFx0dGhpcy4kdG90YWxDb3VudC5odG1sKGFwcC5yZXN1bHRzSXRlbXNDb2xsZWN0aW9uLmNhbGN1bGF0ZVRvdGFsKCkpO1xyXG5cdFx0XHRcdHRoaXMuJG1haW4uc2hvdygpO1xyXG5cdFx0XHRcdHRoaXMuJHRvdGFsLnNob3coKTtcclxuXHRcdFx0Ly8gSGlkZSB0b3RhbCBzdGF0aXN0aWNzIGlmIHByb2R1Y3QgbGlzdCBpZiBlbXB0eVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuJG1haW4uaGlkZSgpO1xyXG5cdFx0XHRcdHRoaXMuJHRvdGFsLmhpZGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBBZGQgYSBzaW5nbGUgcHJvZHVjdCBpdGVtIHRvIHRoZSBsaXN0IGJ5IGNyZWF0aW5nIGEgdmlldyBmb3IgaXQsIGFuZFxyXG5cdFx0Ly8gYXBwZW5kaW5nIGl0cyBlbGVtZW50IHRvIHRoZSBgPHVsPmAuXHJcblx0XHRhZGRPbmU6IGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0XHRcdHZhciB2aWV3ID0gbmV3IGFwcC5SZXN1bHRzSXRlbVZpZXcoeyBtb2RlbDogaXRlbSB9KTtcclxuXHRcdFx0dGhpcy4kbGlzdC5hcHBlbmQodmlldy5yZW5kZXIoKS5lbCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEFkZCBhbGwgaXRlbXMgaW4gdGhlICdyZXN1bHRzSXRlbXNDb2xsZWN0aW9uJyBjb2xsZWN0aW9uIGF0IG9uY2UuXHJcblx0XHRhZGRBbGw6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGhpcy4kbGlzdC5odG1sKCcnKTtcclxuXHRcdFx0YXBwLnJlc3VsdHNJdGVtc0NvbGxlY3Rpb24uZWFjaCh0aGlzLmFkZE9uZSwgdGhpcyk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKGpRdWVyeSk7IiwiLypnbG9iYWwgQmFja2JvbmUsIGpRdWVyeSwgXywgRU5URVJfS0VZICovXHJcbi8qIEZpbGUgaXMgbm90IHVzZWQgYW5kIGNyZWF0ZWQgZm9yIGZ1dHVyZSBkZXZlbG9wbWVudCAqL1xyXG5cclxudmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBBcHBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kKHtcclxuICAgICAgICByb3V0ZXM6IHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciByb3V0ZXIgPSBuZXcgQXBwUm91dGVyKCk7IC8vIENyZWF0ZSBDb250cm9sbGVyXHJcbiAgICBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KCk7ICAvLyBIVE1MNSBIaXN0b3J5IHB1c2hcclxufSkoKTsiLCIvKmdsb2JhbCAkICovXHJcbi8qanNoaW50IHVudXNlZDpmYWxzZSAqL1xyXG52YXIgYXBwID0gYXBwIHx8IHt9O1xyXG52YXIgRU5URVJfS0VZID0gMTM7XHJcbnZhciBFU0NfS0VZID0gMjc7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8vIGtpY2sgdGhpbmdzIG9mZiBieSBjcmVhdGluZyB0aGUgYEFwcGBcclxuXHRuZXcgYXBwLlNlYXJjaFZpZXcoKTtcclxuXHRuZXcgYXBwLlJlc3VsdHNWaWV3KCk7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
